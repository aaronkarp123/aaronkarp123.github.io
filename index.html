<!DOCTYPE html>
<html lang="en">
	<head> 
		<title>Aaron Karp</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style type="text/css">a {text-decoration: none}</style>
		<style>
			body {
				font-family: Helvetica Neue;
				background-color: #000000;
				margin: 0px;
				overflow: hidden;
				line-height: 1.5;
			}
		</style>
		<style>
			a:hover, a:active {color: #ffffff;}
			a {color: #dfdfdf;}
		</style>
		<link rel="shortcut icon" href="files/Favicon.png" />
	</head>
	<link rel="stylesheet" type="text/css" href="stylesheet.css">
	<body>
		<script>
		window.mobilecheck = function() {
			var check = false;
			if(window.innerWidth<768){
				check=true;
			}
			return check;
		}
		if(window.mobilecheck()){
			window.location.href="index-mobile.html";
		}
	</script>
		<br><br><br><br>
		<div id="BlackBackground"></div>
		 <div id="simplified-back-mobile" style="overflow: auto;">
		 	<!-- <hr align="left" style="border: 2px solid#5b9aa0; width: 60%;"/> -->
		 	<!--<div style="width: 1.5%; height:100vh; padding-right: 8px; float:left; direction: rtl;">
		 		<img src="files/barbot.png" height="50" style="position: absolute; left: 0%; top: 3.0%; opacity: 0.5;"> -->
		 		<!-- <video id="myvideo" autoplay loop muted playsinline src="files/scrollgif.mp4" height="200" playbackrate="0.5" style="position: absolute; top: 40%; opacity: 0.4;" alt="Italian Trulli"></video> -->
		 	<!--</div> -->
		</div>
		<div id ="loaded_content"></div>
		<div id="closeBut"><span id="close" onclick="unloadHome();">x</span></div>
		<script type="text/javascript" src="worksv4.js"></script>
		<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
		<script type="text/javascript">

			init();


			var slideIndex = 0;
			var slideTimeout = null;
			var loaded = false

			function showSlides() {
			  var i;
			  var slides = document.getElementsByClassName("mySlides");
			  var dots = document.getElementsByClassName("dot");
			  for (i = 0; i < slides.length; i++) {
			    slides[i].style.display = "none";  
			  }
			  slideIndex++;
			  if (slideIndex > slides.length) {slideIndex = 1}    
			  for (i = 0; i < dots.length; i++) {
			    dots[i].className = dots[i].className.replace(" active", "");
			  }
			  slides[slideIndex-1].style.display = "block";  
			  dots[slideIndex-1].className += " active";
			  slideTimeout = setTimeout(showSlides, 6000); // Change image every 2 seconds
			}

			async function fetchHtmlAsText(url) {
			    return await (await fetch(url)).text();
			}

			async function load_home(html_link) {
				var e = document.getElementById('simplified-back-mobile');
				var contentDiv = document.getElementById("loaded_content");
				contentDiv.innerHTML = '';
				if (html_link.includes("yout")){
					contentDiv.innerHTML = '<iframe class="youtube-video" width="100%" height="100%" src="' + html_link.replace("watch?v=", "v/") + '" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen allowscriptaccess="always"></iframe>'

				}
				else{
					try{
					contentDiv.innerHTML = await fetchHtmlAsText(html_link);
					if (html_link.includes("within")){
						slideIndex = 0;
						showSlides();
					}
					}
					catch (err){
						window.open(html_link, '_blank');
						return;
					}
				}
				loaded = true;
				contentDiv.className = "fadeinleft";
				e.className = "fadeoutleft";
				e.style.fontFamily = "Helvetica Neue";
				document.getElementById("close").className = "fadeIn";
			}

			function clearContent() {
			  setTimeout(
			    function() {
			    	if (!loaded){
					      document.getElementById('loaded_content').innerHTML = '';
					  }
			    }, 5500);
			}

			function unloadHome() {
				var e = document.getElementById('simplified-back-mobile');
				var contentDiv = document.getElementById("loaded_content");
				var els = contentDiv.getElementsByClassName('youtube-video');
				document.getElementById("close").className = "fadeOut";
				for (var i = 0; i < els.length; i++){
					els[i].contentWindow.postMessage('{"event":"command","func":"' + 'stopVideo' + '","args":""}', '*');
				}
				contentDiv.className = "fadeoutright";
				e.className = "fadeinright";
				if (slideTimeout != null){
					clearTimeout(slideTimeout);
				}
				loaded = false;
				clearContent();
			}

			function unfade(element, rate) {
			    var op = 0.01;  // initial opacity
			    element.style.display = 'block';
			    var timer = setInterval(function () {
			        if (op >= 1.0){
			            clearInterval(timer);
			        }
			        element.style.opacity = op;
			        element.style.filter = 'alpha(opacity=' + op * 100 + ")";
			        op += op * rate;
			    }, 10);
			}

			function fade(element, rate) {
			    var op = 1.0;  // initial opacity
			    element.style.display = 'block';
			    var timer = setInterval(function () {
			        if (op <= 0.001){
			            clearInterval(timer);
			        }
			        element.style.opacity = op;
			        element.style.filter = 'alpha(opacity=' + op * 100 + ")";
			        op -= op * rate;
			    }, 15);
			}
			
			function init() {

				var divs = document.getElementsByTagName("div");
				for(var i = 0; i < divs.length; i++){
				   divs[i].style.display = "block";
				}
				var e = document.getElementById('simplified-back-mobile');
				//populate works
				var works = document.createElement("div")
				works.setAttribute("id", "text");
				var to_create = '';

				to_create += '<br><span style="font-weight:bold; color:#eeeeee">Aaron Karp</span></br></br> <span style="font-weight:bold; color:#ff3333">Music<br>	</span>';
				for (i = 0; i < music_w.length; i++){
					to_create += '<a href="#" id="' + music_w[i] + '" onclick="load_home(\'' + music_wl[i] + '\' );">' + music_w[i] + '</a><br>';
				}
				to_create += '<br>';
				to_create += '<span style="font-weight:bold; color:#00ff00" >Computer Science<br></span>';
				for (i = 0; i < cs_w.length; i++){
					to_create += '<a href="#" id="' + cs_w[i] + '" onclick="load_home(\'' + cs_wl[i] + '\' );">' + cs_w[i] + '</a><br>';
				}
				to_create += '<br>';
				to_create += '<span style="font-weight:bold; color:#00aaff" >Other<br></span>';
				for (i = 0; i < other_w.length; i++){
					to_create += '<a href="' + other_wl[i] + '" target="_blank">' + other_w[i] + '</a><br>';
				}
				to_create += '<br>';
				to_create += '<span style="font-weight:bold; color:#aa55aa" >Fun<br></span>';
				for (i = 0; i < fun_w.length; i++){
					to_create += '<a href="' + fun_wl[i] + '" target="_blank">' + fun_w[i] + '</a><br>';
				}
				//to_create += '<hr align="left" style="border: 2px solid#5b9aa0; width: 80%;"/>'
				//to_create += '<img src="files/bartop.png" height="50" style="position: relative; left: 0%; bottom:0; opacity: 0.5;">'
				works.innerHTML = to_create;
				e.appendChild(works);
				e.style.display="none";

				e.style.display = "block";
				unfade(e, 0.2);
				//const contentDiv = document.getElementById("loaded_content");

				//EDITED
			}

		</script>
	</body>
	</html>